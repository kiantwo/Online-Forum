<table class="table table-bordered">
  <tbody *ngFor="let reply of replies$ | paginate : { itemsPerPage: 5, currentPage: p}; index as i">
    <tr>
      <td scope="col"></td>
      <td scope="col-6">
        <div class="date-posted">
          <p>
            <span class="clock-icon">
              <fa-icon [icon]="faClock"></fa-icon> </span
            >Date posted:
            {{ reply.datePosted.seconds * 1000 | date: "yyyy-MM-dd h:mm a" }}
          </p>
        </div>
      </td>
    </tr>
    <tr>
      <td class="user-cell">
        <div class="user">
          <div class="user-avatar">
            <img
              src="{{
                from$[i].photoURL
                  ? from$[i].photoURL
                  : '/assets/images/default-icon.png'
              }}"
              class="img-thumbnail rounded-circle"
            />
          </div>
          <div class="user-details">
            <h3>{{ from$[i].displayName }}</h3>
            <p>{{ from$[i].email }}</p>
          </div>
        </div>
      </td>
      <td class="message-cell">
        <div class="reply" *ngIf="reply.to">
          <p class="reply-to">
            <span class="comment-icon">
              <fa-icon [icon]="faCommentDots"></fa-icon> </span
            ><strong>{{ to$[i].displayName }}</strong> wrote:
          </p>
          <p class="quote-text" *ngIf="to$[i].message">
            {{ to$[i].message }}
          </p>
          <p class="quote-text" *ngIf="!to$[i].message">
            <i>Reply has been deleted.</i>
          </p>
        </div>
        <div class="message">
          <p>
            {{ reply.message }}
          </p>
        </div>
        <div class="footer">
          <a href="javascript:void(0)" (click)="onReply(i)" class="reply-link"
            ><span class="reply-icon">
              <fa-icon [icon]="faReply"></fa-icon> </span
            >Reply</a
          >
          <a
            href="javascript:void(0)"
            *ngIf="currentUserID === reply.from"
            (click)="onEdit(reply)"
            class="edit-link"
            ><span class="reply-icon">
              <fa-icon [icon]="faEdit"></fa-icon> </span
            >Edit</a
          >
          <a
            href="javascript:void(0)"
            *ngIf="reply.replyID != firstReply && (currentUserID === reply.from || isAdmin)"
            data-bs-toggle="modal"
            data-bs-target="#delete-modal"
            (click)="onDelete(reply, from$[i].displayName)"
            class="delete-link"
            ><span class="reply-icon">
              <fa-icon [icon]="faDelete"></fa-icon> </span
            >Delete reply</a
          >
        </div>
      </td>
    </tr>
    <tr *ngIf="reply === replyToEdit">
      <td></td>
      <td>
        <app-forum-thread-edit
          *ngIf="editClicked"
          [replyToEdit]="replyToEdit"
          (onClose)="onEditClose($event)"
        >
        </app-forum-thread-edit>
      </td>
    </tr>
  </tbody>
</table>
<app-forum-thread-delete-reply
  *ngIf="replyToDelete"
  [reply]="replyToDelete"
  [from]="fromReplyToDelete"
></app-forum-thread-delete-reply>
